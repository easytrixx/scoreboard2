{"ast":null,"code":"import _slicedToArray from\"C:/Users/Cl\\xE9ment/OneDrive/Documents/Scoreboard/ccoreboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState,useEffect}from'react';import Grid from'@material-ui/core/Grid';import Paper from'@material-ui/core/Paper';import Avatar from'@material-ui/core/Avatar';import{makeStyles}from'@material-ui/core/styles';import{Typography}from'@material-ui/core';import{blue}from'@material-ui/core/colors';import{useLocation}from\"react-router-dom\";import{useParams}from\"react-router-dom\";import{Howl,Howler}from\"howler\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{flexGrow:1},score:{padding:theme.spacing(1),textAlign:'center',color:\"red\",fontFamily:\"Lucida Console\",fontSize:\"15px\"},paper:{padding:theme.spacing(1),textAlign:'center',color:\"white\",fontSize:\"30px\",fontFamily:\"Lucida Console\",backgroundColor:\"#B0B0B0\"},teamName:{padding:theme.spacing(1),color:\"white\",fontSize:\"30px\",fontFamily:\"Lucida Console\",marginLeft:\"15px\"},borderCity:{backgroundColor:\"#3ACAF0\"},borderAway:{backgroundColor:\"#EB0705\"},borderS:{backgroundColor:\"#B0B0B0\",fontFamily:\"Lucida Console\"},bigBorder:{marginLeft:\"10px\",marginTop:\"10px\",boxShadow:\"0px 35px 30px -15px #111\"},avatar:{height:\"53px\",width:\"53px\"},borderSTop:{backgroundColor:\"#B0B0B0\",fontFamily:\"Lucida Console\"},gridScore:{backgroundColor:\"#EDF792\",height:\"30px\"}};});var Data=function Data(){var _useParams=useParams(),id=_useParams.id;var MINUTE_MS=20000;var classes=useStyles();var _useState=useState(\"TEST\"),_useState2=_slicedToArray(_useState,2),nameHomeTeam=_useState2[0],setHomeTeam=_useState2[1];var _useState3=useState(\"TEST\"),_useState4=_slicedToArray(_useState3,2),nameAwayTeam=_useState4[0],setAwayTeam=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),scoreHome=_useState6[0],setScoreHome=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),scoreAway=_useState8[0],setScoreAway=_useState8[1];var goal=new Audio(\"/sound.mp3\");var red=new Audio(\"/sound.mp3\");var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),logoHomeTeam=_useState10[0],setLogoHomeTeam=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),logoAwayTeam=_useState12[0],setLogoAwayTeam=_useState12[1];var table=[];var _useState13=useState(\"yellow\"),_useState14=_slicedToArray(_useState13,2),homeTeamColor=_useState14[0],setHomeTeamColor=_useState14[1];var _useState15=useState(\"yellow\"),_useState16=_slicedToArray(_useState15,2),awayTeamColor=_useState16[0],setAwayTeamColor=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),timer=_useState18[0],setTimer=_useState18[1];var start=function start(){fetch(\"https://api.sofascore.com/api/v1/event/\"+id+\"/incidents\").then(function(response){return response.json();}).then(function(users){var lastElement=table[table.length-1];console.log(lastElement);console.log(table);if(lastElement!=null){if(lastElement.id!=null){if(table.length==0||lastElement.time!=users.incidents[1].time){table.push(users.incidents[1]);console.log(\"HELLO\");if(users.incidents[1].incidentType==\"goal\"){goal.play();console.log(\"ET LE BUT\");}else if(users.incidents[1].incidentType==\"card\"&&users.incidents.incidentClass==\"red\"){red.play();console.log(\"ET LA ROUGE\");}}}else{console.log(\"Il y a un bug\");}}else{console.log(\"LOOL\");table.push(users.incidents[1]);if(users.incidents[1].incidentType==\"goal\"){goal.play();console.log(\"ET LE BUT\");}else if(users.incidents[1].incidentType==\"card\"&&users.incidents.incidentClass==\"red\"){red.play();console.log(\"ET LA ROUGE\");}}});};var setMinuts=function setMinuts(value){var start=value.currentPeriodStartTimestamp;var now=Math.floor(Date.now()/1000);var time=now-start;var h=Math.floor(time/3600);var m=Math.floor(time%3600/60);var s=Math.floor(time%3600%60);var realtime=\"\";if(value.status.type==\"notstarted\"){realtime=45;}else{if(value.lastPeriod==\"period1\"){realtime=m;}else if(value.lastPeriod==null){//realtime=\"HT\";\nrealtime=89;}else{realtime=45+m;}}setTimer(realtime);};var getData=function getData(){fetch(\"https://api.sofascore.com/api/v1/event/\"+id).then(function(response){return response.json();}).then(function(users){if(users.event.homeScore.current==null){setScoreHome(0);setScoreAway(0);}else{setScoreHome(users.event.homeScore.current);setScoreAway(users.event.awayScore.current);}setHomeTeam(users.event.homeTeam.name);setAwayTeam(users.event.awayTeam.name);getLogoHomeTeam(users.event.homeTeam.id);getLogoAwayTeam(users.event.awayTeam.id);setMinuts(users.event);if(users.event.homeTeam.teamColors.primary==\"#ffffff\"){setHomeTeamColor(users.event.homeTeam.teamColors.secondary);}else{setHomeTeamColor(users.event.homeTeam.teamColors.primary);}if(users.event.awayTeam.teamColors.primary==\"#ffffff\"){setAwayTeamColor(users.event.awayTeam.teamColors.secondary);}else{setAwayTeamColor(users.event.awayTeam.teamColors.primary);}});};var getLogoHomeTeam=function getLogoHomeTeam(id){var url=\"https://api.sofascore.app/api/v1/team/\"+id+\"/image\";fetch(url).then(function(response){return response.blob();}).then(function(users){var imageObjectURL=URL.createObjectURL(users);setLogoHomeTeam(imageObjectURL);});};var getLogoAwayTeam=function getLogoAwayTeam(id){var url=\"https://api.sofascore.app/api/v1/team/\"+id+\"/image\";fetch(url).then(function(response){return response.blob();}).then(function(users){var imageObjectURL=URL.createObjectURL(users);setLogoAwayTeam(imageObjectURL);});};useEffect(function(){getData();start();var interval=setInterval(function(){getData();start();},MINUTE_MS);return function(){return clearInterval(interval);};},[]);return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(Grid,{container:true,xs:4,className:classes.bigBorder,children:[/*#__PURE__*/_jsx(Grid,{item:true,container:true,xs:4,style:{backgroundColor:homeTeamColor},justify:\"center\",alignItems:\"center\",backgroundColor:\"#0310a7\",children:/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,src:logoHomeTeam})}),/*#__PURE__*/_jsx(Grid,{item:true,container:true,xs:6,style:{backgroundColor:homeTeamColor},children:/*#__PURE__*/_jsx(Typography,{className:classes.teamName,children:nameHomeTeam.substring(0,3).toUpperCase()})}),/*#__PURE__*/_jsx(Grid,{item:true,container:true,xs:2,className:classes.borderSTop,justify:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Typography,{className:classes.paper,children:scoreHome})}),/*#__PURE__*/_jsx(Grid,{item:true,container:true,xs:4,style:{backgroundColor:awayTeamColor},justify:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,src:logoAwayTeam})}),/*#__PURE__*/_jsx(Grid,{item:true,container:true,xs:6,style:{backgroundColor:awayTeamColor},children:/*#__PURE__*/_jsx(Typography,{className:classes.teamName,children:nameAwayTeam.substring(0,3).toUpperCase()})}),/*#__PURE__*/_jsx(Grid,{item:true,container:true,xs:2,className:classes.borderS,justify:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Typography,{className:classes.paper,children:scoreAway})})]})});};export default Data;","map":{"version":3,"sources":["C:/Users/ClÃ©ment/OneDrive/Documents/Scoreboard/ccoreboard/src/pages/Data.js"],"names":["React","useState","useEffect","Grid","Paper","Avatar","makeStyles","Typography","blue","useLocation","useParams","Howl","Howler","useStyles","theme","root","flexGrow","score","padding","spacing","textAlign","color","fontFamily","fontSize","paper","backgroundColor","teamName","marginLeft","borderCity","borderAway","borderS","bigBorder","marginTop","boxShadow","avatar","height","width","borderSTop","gridScore","Data","id","MINUTE_MS","classes","nameHomeTeam","setHomeTeam","nameAwayTeam","setAwayTeam","scoreHome","setScoreHome","scoreAway","setScoreAway","goal","Audio","red","logoHomeTeam","setLogoHomeTeam","logoAwayTeam","setLogoAwayTeam","table","homeTeamColor","setHomeTeamColor","awayTeamColor","setAwayTeamColor","timer","setTimer","start","fetch","then","response","json","users","lastElement","length","console","log","time","incidents","push","incidentType","play","incidentClass","setMinuts","value","currentPeriodStartTimestamp","now","Math","floor","Date","h","m","s","realtime","status","type","lastPeriod","getData","event","homeScore","current","awayScore","homeTeam","name","awayTeam","getLogoHomeTeam","getLogoAwayTeam","teamColors","primary","secondary","url","blob","imageObjectURL","URL","createObjectURL","interval","setInterval","clearInterval","substring","toUpperCase"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {useState, useEffect} from 'react'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {Howl,Howler} from \"howler\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    score:{\r\n    padding: theme.spacing(1),\r\n      textAlign: 'center',\r\n      color: \"red\",\r\n      fontFamily: \"Lucida Console\",\r\n      fontSize: \"15px\",\r\n\r\n    },\r\n    paper: {\r\n      padding: theme.spacing(1),\r\n      textAlign: 'center',\r\n      color: \"white\",\r\n    \r\n      fontSize: \"30px\",\r\n      fontFamily: \"Lucida Console\",\r\n      backgroundColor: \"#B0B0B0\"\r\n    },\r\n    teamName: {\r\n        padding: theme.spacing(1),\r\n        color: \"white\",\r\n        fontSize: \"30px\",\r\n        fontFamily: \"Lucida Console\",\r\n        marginLeft: \"15px\"\r\n      },\r\n    borderCity:{\r\n        backgroundColor: \"#3ACAF0\"\r\n    },\r\n    borderAway:{\r\n        backgroundColor: \"#EB0705\",\r\n    },\r\n    borderS:{\r\n        backgroundColor: \"#B0B0B0\",\r\n        fontFamily: \"Lucida Console\",\r\n    },\r\n    bigBorder:{\r\n        marginLeft: \"10px\",\r\n        marginTop: \"10px\",\r\n        boxShadow: \"0px 35px 30px -15px #111\"\r\n    },\r\n    avatar:{\r\n      height: \"53px\",\r\n      width: \"53px\"\r\n    },\r\n    borderSTop:{\r\n        backgroundColor: \"#B0B0B0\",\r\n        fontFamily: \"Lucida Console\",\r\n\r\n    },\r\n    gridScore:{\r\n        backgroundColor: \"#EDF792\",\r\n        height: \"30px\"\r\n    },\r\n  }));\r\n  \r\nconst Data = () => {\r\n    const { id } = useParams()\r\n    const MINUTE_MS = 20000;\r\n    const classes = useStyles();\r\n    const [nameHomeTeam, setHomeTeam] = useState(\"TEST\");\r\n    const [nameAwayTeam, setAwayTeam] = useState(\"TEST\");\r\n    const [scoreHome, setScoreHome] = useState(0);\r\n    const [scoreAway, setScoreAway] = useState(0);\r\n    let goal = new Audio(\"/sound.mp3\")\r\n    let red = new Audio(\"/sound.mp3\")\r\n    const [logoHomeTeam, setLogoHomeTeam] = useState();\r\n    const [logoAwayTeam, setLogoAwayTeam] = useState();\r\n    let table=[]\r\n    const [homeTeamColor,setHomeTeamColor]=useState(\"yellow\");\r\n    const [awayTeamColor, setAwayTeamColor]=useState(\"yellow\")\r\n    const [timer, setTimer]=useState(0);\r\n    const start = () => {\r\n      fetch(\"https://api.sofascore.com/api/v1/event/\"+id+\"/incidents\")\r\n        .then(response=> {\r\n             return response.json();\r\n        })\r\n        .then(users => {\r\n            let lastElement=table[table.length-1]\r\n            console.log(lastElement)\r\n            console.log(table)\r\n            if(lastElement!=null){\r\n              if(lastElement.id!=null){\r\n                if(table.length==0 || lastElement.time!=users.incidents[1].time){\r\n                table.push(users.incidents[1])\r\n                console.log(\"HELLO\")\r\n                if(users.incidents[1].incidentType==\"goal\"){\r\n                  goal.play()\r\n                  console.log(\"ET LE BUT\")\r\n               }\r\n               else if (users.incidents[1].incidentType==\"card\" && users.incidents.incidentClass==\"red\"){\r\n                 red.play()\r\n                 console.log(\"ET LA ROUGE\")\r\n                }\r\n              }\r\n            }\r\n            else{\r\n              console.log(\"Il y a un bug\")\r\n            }\r\n          }\r\n            else{\r\n              console.log(\"LOOL\")\r\n              table.push(users.incidents[1])\r\n              if(users.incidents[1].incidentType==\"goal\"){\r\n                goal.play()\r\n                console.log(\"ET LE BUT\")\r\n             }\r\n             else if (users.incidents[1].incidentType==\"card\" && users.incidents.incidentClass==\"red\"){\r\n              red.play()\r\n              console.log(\"ET LA ROUGE\")\r\n             }\r\n            }\r\n          \r\n        })\r\n    }  \r\n    const setMinuts =(value) => {\r\n        var start=value.currentPeriodStartTimestamp;\r\n        var now=Math.floor(Date.now() / 1000)\r\n        var time=now-start;\r\n        var h = Math.floor(time / 3600);\r\n        var m = Math.floor(time % 3600 / 60);\r\n        var s = Math.floor(time % 3600 % 60);\r\n        var realtime=\"\"\r\n        if(value.status.type==\"notstarted\"){\r\n            realtime=45\r\n        }\r\n        else{\r\n            if(value.lastPeriod==\"period1\"){\r\n                realtime=m;\r\n            }\r\n            else if(value.lastPeriod==null){\r\n                //realtime=\"HT\";\r\n                realtime=89\r\n            }\r\n            else{\r\n                realtime=45+m;\r\n            }\r\n        }\r\n        setTimer(realtime)\r\n    }\r\n    const getData = () => {\r\n\r\n        fetch(\"https://api.sofascore.com/api/v1/event/\"+id)\r\n        .then(response=> {\r\n             return response.json();\r\n        })\r\n        .then(users => {\r\n            if(users.event.homeScore.current==null){\r\n                setScoreHome(0)\r\n                setScoreAway(0)\r\n            }\r\n            else{\r\n                setScoreHome(users.event.homeScore.current);\r\n                setScoreAway(users.event.awayScore.current);\r\n            }\r\n            setHomeTeam(users.event.homeTeam.name);\r\n            setAwayTeam(users.event.awayTeam.name);\r\n            getLogoHomeTeam(users.event.homeTeam.id);\r\n            getLogoAwayTeam(users.event.awayTeam.id);\r\n            setMinuts(users.event)\r\n            if(users.event.homeTeam.teamColors.primary==\"#ffffff\"){\r\n                setHomeTeamColor(users.event.homeTeam.teamColors.secondary)\r\n            }\r\n            else{\r\n                setHomeTeamColor(users.event.homeTeam.teamColors.primary)\r\n            }\r\n            if(users.event.awayTeam.teamColors.primary==\"#ffffff\"){\r\n                setAwayTeamColor(users.event.awayTeam.teamColors.secondary)\r\n            }\r\n            else{\r\n                setAwayTeamColor(users.event.awayTeam.teamColors.primary)\r\n            }\r\n        })\r\n    }\r\n    const getLogoHomeTeam = (id) =>{\r\n        const url=\"https://api.sofascore.app/api/v1/team/\"+id+\"/image\"\r\n        fetch(url)\r\n        .then(response=> {\r\n             return response.blob();\r\n        })\r\n        .then(users => {\r\n            const imageObjectURL = URL.createObjectURL(users);\r\n            setLogoHomeTeam(imageObjectURL);\r\n            \r\n        })\r\n    }\r\n    const getLogoAwayTeam = (id) =>{\r\n        const url=\"https://api.sofascore.app/api/v1/team/\"+id+\"/image\"\r\n        fetch(url)\r\n        .then(response=> {\r\n             return response.blob();\r\n        })\r\n        .then(users => {\r\n            const imageObjectURL = URL.createObjectURL(users);\r\n            setLogoAwayTeam(imageObjectURL);\r\n        })\r\n    }\r\n    useEffect(() => {\r\n        getData()\r\n        start()\r\n        const interval = setInterval(() => {\r\n            getData()\r\n            start()\r\n        }, MINUTE_MS);\r\n        return () => clearInterval(interval);\r\n    },[])\r\n    return (\r\n        <div className={classes.root}>\r\n        <Grid container xs={4} className={classes.bigBorder}>\r\n          <Grid item container xs={4} style={{backgroundColor: homeTeamColor}} justify=\"center\" alignItems=\"center\" backgroundColor=\"#0310a7\">\r\n            <Avatar className={classes.avatar} src={logoHomeTeam}></Avatar>\r\n          </Grid>\r\n          <Grid item container xs={6} style={{backgroundColor: homeTeamColor}} >\r\n            <Typography className={classes.teamName}>{nameHomeTeam.substring(0,3).toUpperCase()}</Typography>\r\n          </Grid>\r\n          <Grid item container xs={2} className={classes.borderSTop} justify=\"center\" alignItems=\"center\">\r\n            <Typography className={classes.paper}>{scoreHome}</Typography>\r\n          </Grid>\r\n          <Grid item container xs={4} style={{backgroundColor: awayTeamColor}} justify=\"center\" alignItems=\"center\">\r\n            <Avatar className={classes.avatar} src={logoAwayTeam}></Avatar>\r\n          </Grid>\r\n          <Grid item container xs={6} style={{backgroundColor: awayTeamColor}} >\r\n            <Typography className={classes.teamName}>{nameAwayTeam.substring(0,3).toUpperCase()}</Typography>\r\n          </Grid>\r\n          <Grid item container xs={2} className={classes.borderS} justify=\"center\" alignItems=\"center\">\r\n            <Typography className={classes.paper}>{scoreAway}</Typography>\r\n          </Grid>\r\n         \r\n        </Grid>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Data;"]},"metadata":{},"sourceType":"module"}